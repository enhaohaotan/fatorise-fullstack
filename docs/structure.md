# API Contract — v0

## 1. Overview

- **Base URL (local):** `http://localhost:3000`
- **Content-Type:** `application/json`
- **Character encoding:** UTF-8
- **ID format:** UUID (string)
- **Time format:** ISO 8601 string (e.g. `2025-12-23T12:34:56.000Z`)

## 2. Conventions

- All responses are wrapped in `{ "data": ... }` for success
- All errors are wrapped in `{ "error": { "code": "...", "message": "..." } }`
- Field names use camelCase
- Timestamps are auto-generated by the server

### 2.1 HTTP Status Codes

| Status | Meaning                        |
| ------ | ------------------------------ |
| 200    | OK - Request succeeded         |
| 201    | Created - Resource created     |
| 400    | Bad Request - Validation error |
| 404    | Not Found - Resource not found |
| 500    | Internal Server Error          |

### 2.2 Error Response

```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Title is required"
  }
}
```

**Error Codes:**

- `VALIDATION_ERROR` - Invalid request body
- `NOT_FOUND` - Resource does not exist
- `INTERNAL_ERROR` - Server error

## 3. Data Model

### 3.1 Task

```json
{
  "id": "7d0c1c4d-1a9e-4f5e-9d3a-3e7a2b6d4a1f",
  "title": "Buy milk",
  "description": "2% or oat",
  "completed": false,
  "createdAt": "2025-12-23T12:34:56.000Z",
  "updatedAt": "2025-12-23T12:34:56.000Z"
}
```

| Field       | Type              | Required | Description              |
| ----------- | ----------------- | -------- | ------------------------ |
| id          | string (UUID)     | auto     | Unique identifier        |
| title       | string            | ✅       | Task title (1-255 chars) |
| description | string \| null    | ❌       | Optional description     |
| completed   | boolean           | ❌       | Default: false           |
| createdAt   | string (ISO 8601) | auto     | Creation timestamp       |
| updatedAt   | string (ISO 8601) | auto     | Last update timestamp    |

## 4. Endpoints

### 4.1 Health Check

`GET /health`

**Response:** `200 OK`

```json
{
  "data": {
    "ok": true
  }
}
```

### 4.2 View Tasks

`GET /tasks`

**Description:** Returns tasks sorted by createdAt descending.

**Response:** `200 OK`

```json
{
  "data": [
    {
      "id": "7d0c1c4d-1a9e-4f5e-9d3a-3e7a2b6d4a1f",
      "title": "Buy milk",
      "description": null,
      "completed": false,
      "createdAt": "2025-12-23T12:34:56.000Z",
      "updatedAt": "2025-12-23T12:34:56.000Z"
    }
  ]
}
```

### 4.3 Create Task

`POST /tasks`

**Request Body:**

```json
{
  "title": "Buy milk",
  "description": "2% or oat"
}
```

| Field       | Type   | Required | Description              |
| ----------- | ------ | -------- | ------------------------ |
| title       | string | ✅       | Task title (1-255 chars) |
| description | string | ❌       | Optional description     |

**Response:** `201 Created`

```json
{
  "data": {
    "id": "7d0c1c4d-1a9e-4f5e-9d3a-3e7a2b6d4a1f",
    "title": "Buy milk",
    "description": "2% or oat",
    "completed": false,
    "createdAt": "2025-12-23T12:34:56.000Z",
    "updatedAt": "2025-12-23T12:34:56.000Z"
  }
}
```

**Errors:**

- `400` - Title is required or invalid

### 4.4 Update Task

`PUT /tasks/{id}`

**Path Parameters:**

- `id` - Task UUID

**Request Body:**

```json
{
  "title": "Buy oat milk",
  "description": "From Whole Foods",
  "completed": true
}
```

| Field       | Type           | Required | Description       |
| ----------- | -------------- | -------- | ----------------- |
| title       | string         | ❌       | New title         |
| description | string \| null | ❌       | New description   |
| completed   | boolean        | ❌       | Completion status |

**Response:** `200 OK`

```json
{
  "data": {
    "id": "7d0c1c4d-1a9e-4f5e-9d3a-3e7a2b6d4a1f",
    "title": "Buy oat milk",
    "description": "From Whole Foods",
    "completed": true,
    "createdAt": "2025-12-23T12:34:56.000Z",
    "updatedAt": "2025-12-23T13:00:00.000Z"
  }
}
```

**Errors:**

- `400` - Invalid request body
- `404` - Task not found

### 4.5 Delete Task

`DELETE /tasks/{id}`

**Path Parameters:**

- `id` - Task UUID

**Response:** `200 OK`

```json
{
  "data": {
    "id": "7d0c1c4d-1a9e-4f5e-9d3a-3e7a2b6d4a1f"
  }
}
```

**Errors:**

- `404` - Task not found
